
<form id = "newForm1" action="newQuestion" method="post">{% csrf_token %}
	<input type="text" name="nazwa" />
	<!-- <ul id="choiceList"></ul> -->

	<input type="submit" value="Dodaj Pytanie" />
	
</form>


function sayHello() {
    // alert("Hello World!");
    //document.writeln("<h1>Hello World!</h1><p>Have a nice day!</p>");

    var node=document.createElement("LI");
    var textnode=document.createTextNode("Water");
    node.appendChild(textnode);
    document.getElementById("myList").appendChild(node);
}

function addForm1() {

    var button = document.createElement("button")
    button.setAttribute("onClick","addAnswer1()");
    var t=document.createTextNode("+ odpowiedz");
    button.appendChild(t); 


    var input = document.createElement("input");
    input.setAttribute("id", "question"); 
    input.setAttribute("type", "text"); 
    input.setAttribute("name", "question"); 

    document.getElementById("newForm1").appendChild(input);
    document.getElementById("buttons").appendChild(button);
    
}

var choiceCounter = 0;


function createNewForm(){
    var form = document.createElement("form");
    form.setAttribute("method", "POST"); 
    form.setAttribute("action", "newQuestion");
    form.setAttribute("id", "newForm");

    //var CSRF_TOKEN = document.getElementById('hidden-csrf');

    var CSRF_TOKEN = document.getElementById('csrf_token').value;

    //var CSRF_TOKEN = "{{ csrf_token }}";


    var token = document.createElement("input");
    token.setAttribute("type", "hidden"); 
    token.setAttribute("name", "csrfmiddlewaretoken");
    token.setAttribute("value", CSRF_TOKEN);
    form.appendChild(token);


    var questionText = document.createElement("input"); 
    questionText.setAttribute("id", "question"); 
    questionText.setAttribute("type", "text"); 
    questionText.setAttribute("name", "question"); 

    form.appendChild(questionText);

    document.body.appendChild(form);


    var buttonAdd = document.createElement("button");
    buttonAdd.setAttribute("onClick","addChoice()");
    var t=document.createTextNode("+ odpowiedz");
    buttonAdd.appendChild(t); 
    document.getElementById("buttons").appendChild(buttonAdd);

    choiceCounter = 0;

}


function addChoice(){
    
    var newId = "id".concat(choiceCounter); //id0, id1 itp
    var newName = "choice".concat(choiceCounter); 

    var choice = document.createElement("input");
    choice.setAttribute("id", newId); 
    choice.setAttribute("type", "text"); 
    choice.setAttribute("name", newName); 

    document.getElementById("newForm").appendChild(choice);
    choiceCounter = choiceCounter +1;
}


function submitNewForm(){
    var form = document.getElementById("newForm");
    form.submit();
}

function addAnswer1(){

    var x=document.getElementsByName("choice");

    var idConcated = "id".concat(x.length);
    alert(idConcated);
    var choice = document.createElement("input");
    choice.setAttribute("id", idConcated); 
    choice.setAttribute("type", "text"); 
    choice.setAttribute("name", "choice"); 
    document.getElementById("newForm1").appendChild(choice);
}




package com.example.qrpoll;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.AsyncTask;
import android.widget.Toast;



public class MyHttpURLConnection {
	
	String mainResult = "";
	
	public String get(String url) throws Exception404 {
		new HttpAsyncTask().execute(url);
		
		
		
		return mainResult;
		
	}
	
    public static String getResult(String url) throws Exception404{
        InputStream inputStream = null;
        String result = "";
        HttpResponse httpResponse = null;
        try{
           // create HttpClient
            HttpClient httpclient = new DefaultHttpClient();
 
            // make GET request to the given URL
            httpResponse = httpclient.execute(new HttpGet(url));
 
            // receive response as inputStream
            inputStream = httpResponse.getEntity().getContent();

            // convert inputstream to string
            if(inputStream != null)
                result = convertInputStreamToString(inputStream);
            else
                result = "Did not work!";
        }
        catch(Exception e){
        	e.printStackTrace();
        }
        int code = httpResponse.getStatusLine().getStatusCode();
        if(code==404) throw new Exception404(); //jesli kod odpowiedzi jest 404, wyrzuc Exception404 (taka strona nie istanieje)
 
 
        return result;
    }
    

 
    private static String convertInputStreamToString(InputStream inputStream) throws IOException{
        BufferedReader bufferedReader = new BufferedReader( new InputStreamReader(inputStream));
        String line = "";
        String result = "";
        while((line = bufferedReader.readLine()) != null)
            result += line;
 
        inputStream.close();
        return result;
 
    }
    
    private class HttpAsyncTask extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... urls) {
        	String s = null;
			try {
				s= MyHttpURLConnection.getResult(urls[0]);
			} catch (Exception404 e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}

            return s;
        }
        
        // onPostExecute displays the results of the AsyncTask.
        @Override
        protected void onPostExecute(String result) {
        	
//            Toast.makeText(getBaseContext(), "Received!", Toast.LENGTH_LONG).show();
//            getResponse.setText(result);
        	mainResult = result;
       }
        // onPostExecute displays the results of the AsyncTask.
    }
 

	
//	static public String get(String url) {
//		HttpAsyncTask hat = new HttpAsyncTask();
//		
//		return hat.execute(url);
//	}
//	
//	private class HttpAsyncTask extends AsyncTask<String, Void, String> {
//        @Override
//        protected String doInBackground(String... urls) {
//        	String resString = null;
//        	
//        	try{
//        		HttpClient httpclient = new DefaultHttpClient(); // Create HTTP Client
//        		HttpGet httpget = new HttpGet(urls[0]); // Set the action you want to do
//        		HttpResponse response = httpclient.execute(httpget); // Executeit
//        		HttpEntity entity = response.getEntity(); 
//        		
//        		int code = response.getStatusLine().getStatusCode();
//        		if(code==404) throw new Exception404(); //jesli kod odpowiedzi jest 404, wyrzuc Exception404 (taka strona nie istanieje)
//        	
//        		InputStream is = entity.getContent(); // Create an InputStream with the response
//        		BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
//        		StringBuilder sb = new StringBuilder();
//        		String line = null;
//        		while ((line = reader.readLine()) != null) // Read line by line
//        		    sb.append(line + "\n");
//        		
//        		is.close(); // Close the stream
//        		resString = sb.toString(); // Result is here
//        		
//        	}catch(Exception e){
//        		return null;
//        	}
//    		
//    		return resString;	
//        	
//        }
//
//    }
	
}





var choiceCounter = 0;
var formCounter = 0;

function createForm(){
    var formId = "form".concat(formCounter);
    var form = document.createElement("form");
    form.setAttribute("method", "POST"); 
    form.setAttribute("action", "newQuestion");
    form.setAttribute("id", formId);

    //var CSRF_TOKEN = document.getElementById('hidden-csrf');

    var CSRF_TOKEN = document.getElementById('csrf_token').value;

    //var CSRF_TOKEN = "{{ csrf_token }}";


    var token = document.createElement("input");
    token.setAttribute("type", "hidden"); 
    token.setAttribute("name", "csrfmiddlewaretoken");
    token.setAttribute("value", CSRF_TOKEN);
    form.appendChild(token);


    var questionText = document.createElement("input"); 
    questionText.setAttribute("id", "question"); 
    questionText.setAttribute("type", "text"); 
    questionText.setAttribute("name", "question"); 

    form.appendChild(questionText);


    var buttonAddChoice = document.createElement("button");
    buttonAddChoice.setAttribute("onClick","addChoice()");
    var t=document.createTextNode("+ odpowiedz");
    buttonAddChoice.appendChild(t); 
    //form.appendChild(buttonAddChoice);

    document.getElementById("buttons").appendChild(buttonAddChoice);


    var buttonAddQuestionId = "buttonAddQuestion".concat(formCounter);
    var buttonAddQuestion = document.createElement("button");
    buttonAddQuestion.setAttribute("onClick","submitForm()");
    buttonAddQuestion.setAttribute("id", buttonAddQuestionId);
    var t2=document.createTextNode("Dodaj Pytanie");
    buttonAddQuestion.appendChild(t2); 
    form.appendChild(buttonAddQuestion);


    var tableId = "choiceTable".concat(formCounter);
    var table = document.createElement("table");
    table.setAttribute("id", tableId);

    form.appendChild(table);


    document.body.appendChild(form);
    choiceCounter = 0;

    formCounter = formCounter+1;

}


function addChoice(){
    
    var newId = "id".concat(choiceCounter); //id0, id1 itp
    var newName = "choice".concat(choiceCounter); 

    var choice = document.createElement("input");


    var tr = document.createElement("tr");
    var tdLabel = document.createElement("td");
    var tdInput = document.createElement("td");

    tr.appendChild(tdLabel);
    tr.appendChild(tdInput);
    
    tdInput.appendChild(choice);
    tdLabel.appendChild(document.createTextNode("odp ".concat(choiceCounter)));



    choice.setAttribute("id", newId); 
    choice.setAttribute("type", "text"); 
    choice.setAttribute("name", newName); 

    //document.getElementById("form").appendChild(choice);
    document.getElementById("choiceTable").appendChild(tr);


    choiceCounter = choiceCounter +1;
}


function submitForm(){
    var form = document.getElementById("form");
    form.submit();
}

